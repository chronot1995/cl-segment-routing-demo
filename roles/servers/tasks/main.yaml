---

- name: Copy server01 and server04 interfaces configuration
  template:
    src: interfaces-odd.j2
    dest: /etc/network/interfaces
    backup: yes
  when: (inventory_hostname == "server01") or (inventory_hostname == "server04")

- name: Copy server02 and server05 interfaces configuration
  template:
    src: interfaces-even.j2
    dest: /etc/network/interfaces
    backup: yes
  when: (inventory_hostname == "server02") or (inventory_hostname == "server05")

- name: Sleep for server to disconnect
  pause:
    seconds: 5

- name: reboot
  reboot:
    pre_reboot_delay: 60

- name: Flush Handlers, best practice
  meta: flush_handlers
